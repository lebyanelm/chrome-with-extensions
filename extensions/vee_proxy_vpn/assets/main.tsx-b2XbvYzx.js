import{r as p,j as t,c as v}from"./client-CyCKgMGM.js";import{b as m,i as j}from"./index-Cmg072g4.js";import"./webcomponents-bundle-CAO5xEtU.js";const u=new Map,l=new Map,x=async function(e){if(await Promise.resolve(),j(e)){const o=e.id?u.get(e.id):u.get(e.type);o&&o(e);const s=e.id?l.get(e.id):l.get(e.type);s&&s.forEach(r=>{r(e)})}};m.runtime.onMessage.addListener(x);const z=function(){m.runtime.onMessage.removeListener(x)};window.addEventListener("beforeunload",z);function _(){return async function(e,...o){return new Promise(s=>{const r=crypto.randomUUID();u.set(r,a=>{u.delete(r),s(a)});const i={type:e,id:r,data:o[0]??{}};m.runtime.sendMessage(i).catch(()=>{})})}}function M(){return function(e,o){const s=l.get(e)??[];return s.push(o),l.set(e,s),()=>{var i;const r=((i=l.get(e))==null?void 0:i.filter(a=>a===o))??[];r.length===0?l.delete(e):l.set(e,r)}}}const h=_(),N=M(),L=""+new URL("icon-logo-BMFBtERK.svg",import.meta.url).href,C=""+new URL("icon-fire-Dj1F5-_M.svg",import.meta.url).href,E=""+new URL("lines-short-l6aq7GhZ.svg",import.meta.url).href,S=""+new URL("lines-long-D9t9MD6m.svg",import.meta.url).href,d=_(),U=function(e){const o=a=>a.toString().padStart(2,"0"),s=Math.floor(e/1e3),r=Math.floor(s/60),i=Math.floor(s-r*60);return`${o(r)}:${o(i)}`},c=function(e,o=1e3){return Math.floor(e/o)*o};function D({data:n}){const[e,o]=p.useState(0),s=e!==0,r=n?c(n.nextTimestamp-Date.now())<=0&&e<=n.interval:!1,i=p.useRef(null);p.useEffect(()=>{const f=c(n.nextTimestamp+n.interval-Date.now());return f>0&&(o(f),i.current=setInterval(()=>{o(g=>{g===n.interval&&!document.hidden&&d("send-analytic-event",{types:["google-analytics","aws-kinesis"],name:"lock_screen_shown",data:{event_properties__connection_time:c(Date.now()-n.startedAt)}}).catch(()=>{});const b=Math.max(g-1e3,0);return b===0&&clearInterval((i==null?void 0:i.current)??void 0),b})},1e3)),()=>{clearTimeout((i==null?void 0:i.current)??void 0),document.hidden||d("send-analytic-event",{types:["google-analytics","aws-kinesis"],name:"lock_screen_closed",data:{event_properties__connection_time:c(Date.now()-n.startedAt)}}).catch(()=>{})}},[n]);const a=function(){d("show-website-page",{page:"pricing",params:{utm_campaign:"lock_screen"}}).catch(()=>{}),document.hidden||d("send-analytic-event",{types:["google-analytics","aws-kinesis"],name:"lock_screen_upgrade_clicked",data:{event_properties__connection_time:c(Date.now()-n.startedAt)}}).catch(()=>{})},w=function(){h("close-lock-screen").catch(()=>{}),document.hidden||d("send-analytic-event",{types:["google-analytics","aws-kinesis"],name:"lock_screen_close_icon_clicked",data:{event_properties__connection_time:c(Date.now()-n.startedAt)}}).catch(()=>{})},y=function(){h("close-lock-screen").catch(()=>{}),document.hidden||d("send-analytic-event",{types:["google-analytics","aws-kinesis"],name:"lock_screen_close_button_clicked",data:{event_properties__connection_time:c(Date.now()-n.startedAt)}}).catch(()=>{})};return r?t.jsxs("div",{className:"lock-screen",children:[t.jsxs("header",{className:"lock-screen__header",children:[t.jsxs("span",{className:"lock-screen__logo",children:[t.jsx("img",{src:L,alt:"veepn",width:"32",height:"40"}),"VeePN"]}),t.jsx("button",{className:"lock-screen__close",type:"button",hidden:s,onClick:w,children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",children:t.jsx("path",{d:"m18.75 5.25-13.5 13.5M18.75 18.75 5.25 5.25",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"})})})]}),t.jsx("main",{className:"lock-screen__main",children:t.jsxs("div",{className:"lock-screen__container",children:[t.jsxs("section",{className:"lock-screen__content",children:[t.jsx("h1",{className:"lock-screen__title",children:"Sorry for the wait"}),t.jsx("p",{className:"lock-screen__description",children:"Our free servers are in high demand, so we apply short timeouts to keep things fair for everyone. Thank you for your patience! You can close this screen in a few seconds. Consider Premium for faster, uninterrupted access."}),t.jsxs("div",{className:"lock-screen__actions",children:[t.jsx("button",{className:"lock-screen__action upgrade-btn",type:"button",onClick:a,children:"Upgrade to Premium"}),t.jsxs("button",{className:"lock-screen__action skip-btn",type:"button",disabled:s,onClick:y,children:[t.jsx("svg",{className:"skip-btn__icon",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",children:t.jsx("path",{d:"M12 3v3M21 12h-3M18.363 18.364l-2.12-2.121M12 21v-3M5.637 18.364l2.121-2.121M3 12h3M5.637 5.636l2.121 2.121",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"})}),t.jsx("span",{className:"skip-btn__text",children:"Close"}),t.jsx("span",{className:"skip-btn__tooltip",children:"You can close this screen now!"})]})]})]}),t.jsx("section",{className:"lock-screen__timer",children:t.jsxs("div",{className:"timer"+(s?"":" timer--finished"),children:[t.jsx("img",{className:"timer__circle-backward",src:E,alt:"backward",width:"352",height:"352"}),t.jsx("img",{className:"timer__circle-forward",src:S,alt:"forward",width:"390",height:"390"}),t.jsx("img",{className:"timer__fire-icon",src:C,alt:"fire",width:"34",height:"49"}),t.jsx("span",{className:"timer__text",children:U(e)})]})})]})})]}):null}function F(){const[n,e]=p.useState();return p.useEffect(()=>{const o=function(){h("get-lock-screen-show-state").then(i=>{i.success&&e(i.data)}).catch(()=>{})};o();const s=N("lock-screen-show-state-change",r=>{r.success&&e(r.data)});return document.addEventListener("visibilitychange",o),()=>{s(),document.removeEventListener("visibilitychange",o)}},[]),(n==null?void 0:n.active)&&t.jsx(D,{data:n})}const R='html{box-sizing:border-box;text-size-adjust:100%;word-break:normal;-moz-tab-size:4;tab-size:4}*,:before,:after{background-repeat:no-repeat;box-sizing:border-box}:before,:after{text-decoration:inherit;vertical-align:inherit}*{padding:0;margin:0}hr{overflow:visible;height:0;color:inherit;border:0;border-top:1px solid}details,main{display:block}summary{display:list-item}small{font-size:80%}[hidden]{display:none!important}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}a{background-color:transparent}a:active,a:hover{outline-width:0}code,kbd,pre,samp{font-family:monospace}pre{font-size:1em}b,strong{font-weight:bolder}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-color:inherit;text-indent:0}iframe{border-style:none}input{border-radius:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none;-moz-appearance:none;appearance:none}textarea{overflow:auto;resize:vertical}button,input,optgroup,select,textarea{font:inherit;color:inherit}optgroup{font-weight:700}button{overflow:visible}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit],[role=button]{cursor:pointer}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button,html [type=button],[type=reset],[type=submit]{-webkit-appearance:button;-moz-appearance:button;appearance:button}button,input,select,textarea{background-color:transparent;border-style:none}button:-moz-focusring,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{outline:1px dotted ButtonText}select{-webkit-appearance:none;-moz-appearance:none;appearance:none}a:focus,button:focus,input:focus,select:focus,textarea:focus{outline-width:0}select::-ms-expand{display:none}select::-ms-value{color:currentcolor}legend{border:0;color:inherit;display:table;white-space:normal;max-width:100%}::-webkit-file-upload-button{-webkit-appearance:button;-moz-appearance:button;appearance:button;color:inherit;font:inherit}[disabled]{cursor:default}img{border-style:none}progress{vertical-align:baseline}[aria-busy=true]{cursor:progress}[aria-controls]{cursor:pointer}[aria-disabled=true]{cursor:default}ul,ol{list-style-type:none}figure{margin:0}.lock-screen{font-family:FigtreeVF,sans-serif;letter-spacing:normal;position:fixed;z-index:2147483638;top:0;right:0;bottom:0;left:0;padding:32px 40px;color:#222e3a;background-color:#fdfdfd;display:flex;flex-direction:column;row-gap:12px;overflow:auto;background-image:radial-gradient(circle at 0% 0%,#e6fffdcc,#e6fffd00 50%),radial-gradient(circle at 100% 0%,#ebfffecc,#ebfffe00 50%),radial-gradient(circle at 100% 100%,#f0f5ffcc,#f0f5ff00 50%),radial-gradient(circle at 0% 100%,#f2f2ffcc,#f2f2ff00 50%),radial-gradient(circle at 50% 50%,#fff,#fffc,#f5f5ff66,#f0f0ff33,#f0f0ff00),linear-gradient(to bottom right,#e6fffd,#f2f2ff);background-size:100% 100%;background-repeat:no-repeat}.lock-screen__header{display:flex;align-items:center;justify-content:space-between}.lock-screen__logo{display:inline-flex;align-items:center;column-gap:12px;font-size:18px;font-weight:600}.lock-screen__close{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;background-color:#222e3a1a}.lock-screen__main{flex-grow:1;align-content:center}.lock-screen__container{max-width:1120px;margin-inline:auto;display:flex;align-items:center;gap:24px}@media (width < 972px){.lock-screen__container{flex-direction:column}}.lock-screen__timer{display:flex;align-items:center;justify-content:center;width:100%}.lock-screen__content{width:100%}.lock-screen__title{font-size:48px;font-weight:700;line-height:56px;margin-bottom:16px}.lock-screen__description{font-size:18px;line-height:32px;margin-bottom:24px}.lock-screen__actions{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px}.lock-screen__action{height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:16px;font-weight:700;text-align:center;padding:8px 24px}.upgrade-btn{color:#fff;background:linear-gradient(180deg,#20df9e,#13cf8f)}.skip-btn{color:#3066ff;border-width:1px;border-style:solid;border-color:#3066ff;position:relative}.skip-btn__tooltip{font-size:14px;line-height:24px;font-weight:400;position:absolute;z-index:1;left:50%;top:calc(100% + 18px);padding:8px 12px;color:#fff;border:1px solid #4a5764;background-color:#222e3a;border-radius:8px;width:max-content;pointer-events:none;animation:slide-in .6s ease-in-out forwards}@keyframes slide-in{0%{opacity:0;transform:translate(-50%,-100%)}to{opacity:1;transform:translate(-50%)}}.skip-btn__tooltip:after{content:"";display:block;position:absolute;z-index:1;top:-8px;left:50%;width:0;height:0;border-style:solid;border-width:0 8px 8px;border-color:transparent transparent #222e3a;transform:translate(-6px)}.skip-btn__icon{display:none}.skip-btn:disabled{cursor:not-allowed}.skip-btn:disabled .skip-btn__tooltip,.skip-btn:disabled .skip-btn__text{display:none}.skip-btn:disabled .skip-btn__icon{display:initial;animation:tick-tock .8s steps(8,end) infinite}@keyframes tick-tock{to{transform:rotate(360deg)}}.timer{position:relative;max-width:422px;width:100%;aspect-ratio:1/1;border-radius:50%;background-color:#fff;box-shadow:0 0 40px #2b374114;display:flex;align-items:center;justify-content:center;pointer-events:none;-webkit-user-select:none;user-select:none}.timer__circle-backward{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:0;max-width:100%;height:auto;opacity:.4}.timer__circle-forward{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) rotate(45deg);z-index:1;max-width:100%;height:auto;animation:sector 5s linear forwards}.timer__fire-icon{position:absolute;top:22%;left:50%;transform:translate(-50%);z-index:2}.timer__text{font-size:clamp(18px,10vw,88px);letter-spacing:-1px;text-align:center;font-variant-numeric:tabular-nums;position:relative;z-index:3}.timer--finished .timer__text{color:#98a0a9}.timer--finished .timer__circle-forward{display:none}@keyframes sector{0%{clip-path:polygon(50% 50%,0% 2%,100% 0%,100% 100%,0% 100%,0% 2%)}25%{clip-path:polygon(50% 50%,0% 2%,100% 0%,100% 100%,0% 100%,0% 100%)}25.000001%{clip-path:polygon(50% 50%,0% 2%,100% 0%,100% 100%,0% 100%)}50%{clip-path:polygon(50% 50%,0% 2%,100% 0%,100% 100%,100% 100%)}50.000001%{clip-path:polygon(50% 50%,0% 2%,100% 0%,100% 100%)}75%{clip-path:polygon(50% 50%,0% 2%,100% 0%,100% 0%)}75.000001%{clip-path:polygon(50% 50%,0% 2%,100% 0%)}to{clip-path:polygon(50% 50%,0% 2%,0% 0%)}}@media (prefers-color-scheme: dark){.lock-screen{color:#fff;background-image:radial-gradient(circle at 0% 0%,#2f4f4fcc,#2f4f4f00 50%),radial-gradient(circle at 100% 0%,#193042cc,#19304200 50%),radial-gradient(circle at 100% 100%,#1c3041cc,#1c304100 50%),radial-gradient(circle at 0% 100%,#1b263bcc,#1b263b00 50%),radial-gradient(circle at 50% 50%,#141e28,#141e28cc,#1b263b66,#1c304133,#1c304100),linear-gradient(to bottom right,#2f4f4f,#1b263b)}.lock-screen__close{background-color:#ffffff1a}.skip-btn{color:#fff;border-color:#fff}.skip-btn__tooltip{color:#222e3a;border:1px solid #f5f6f7;background-color:#fff}.skip-btn__tooltip:after{border-color:transparent transparent #fff}.timer{background-color:#191b25}.timer__circle-backward{opacity:1}.timer--finished .timer__text{color:#5c6977}}',B='@font-face{font-family:FigtreeVF;src:url(${extensionUrl}fonts/FigtreeVF.woff2) format("woff2 supports variations"),url(${extensionUrl}fonts/FigtreeVF.woff2) format("woff2-variations");font-weight:100 1000;font-display:swap}';class I extends HTMLElement{constructor(){super()}connectedCallback(){const e=this.attachShadow({mode:"open"});v.createRoot(e).render(t.jsx(p.StrictMode,{children:t.jsx(F,{})}));const o=document.createElement("style");o.innerText=R,e.appendChild(o);const s=m.runtime.getURL(""),r=B.replaceAll("${extensionUrl}",s),i=document.createElement("style");i.innerText=r,this.appendChild(i)}}const k="veepn-lock-screen";customElements.define(k,I);document.body.append(document.createElement(k));
